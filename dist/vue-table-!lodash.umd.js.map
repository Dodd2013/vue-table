{"version":3,"file":"vue-table-!lodash.umd.js","sources":["../src/style.js","../src/vue-table-pagination.vue","../src/vue-table.vue","../src/vue-table-info.vue"],"sourcesContent":["const semantic = {\n    tableContainer: \"\",\n    table: \"ui celled teal table\",\n    pagination: \"ui pagination menu\",\n    paginationItem: \"item\",\n    paginationPre: \"icon item\",\n    paginationNext: \"icon item\",\n    paginationPreIcon: \"left chevron icon\",\n    paginationNextIcon: \"right chevron icon\"\n};\nconst bootstrap = {};\n\nexport default {\n    semantic,\n    bootstrap\n};","<template>\n    <div class='vue-table-pagination-component' :class=\"styles.pagination\">\n        <a class=\"\" @click=\"onPagesClick(currentPage - 1)\"\n           :class=\"[styles.paginationPre,{'disabled': currentPage === 1}]\">\n            <i class=\"\" :class=\"styles.paginationPreIcon\"></i>\n        </a>\n        <a class=\"\" v-for=\"index in pages\" @click=\"onPagesClick(index)\"\n           :class=\"[styles.paginationItem,{'active': currentPage === index }]\">{{ index }}</a>\n        <a class=\"\" @click=\"onPagesClick(currentPage + 1)\"\n           :class=\"[styles.paginationNext,{'disabled': currentPage === pageCount }]\">\n            <i class=\"\" :class=\"styles.paginationNextIcon\"></i>\n        </a>\n    </div>\n</template>\n\n<script>\n    import _ from \"lodash\";\n\n    export default {\n        name: \"vue-table-pagination\",\n        props: {\n            styles: {\n                type: Object\n            },\n            pagination: {\n                /**\n                 * e.g. {offset:0,total:30,size:10}\n                 */\n                type: Object,\n                default: function () {\n                    return {\n                        startPage: 0,\n                        total: 10,\n                        size: 10\n                    };\n                }\n            },\n            options: {\n                type: Object,\n                default: function () {\n                    return {};\n                }\n            }\n\n        },\n        data() {\n            return {\n                //1 based currentPage\n                currentPage: null\n            };\n        },\n        methods: {\n            onPagesClick\n        },\n        computed: {\n            pageCount: function () {\n                return Math.ceil(this.pagination.total / this.pagination.size);\n            },\n            pages: function () {\n                return _.range(1, this.pageCount + 1);\n            },\n            offset: function () {\n                return (this.currentPage - 1) * this.pagination.size;\n            }\n        },\n        mounted() {\n            this.onPagesClick(this.pagination.startPage + 1);\n        }\n    };\n\n    /*******************************************\n     * methods\n     *******************************************/\n\n    /**\n     * OnPagesClick\n     * @param index\n     */\n    function onPagesClick(index) {\n        if (index !== this.currentPage && index > 0 && index <= this.pageCount) {\n            this.currentPage = index;\n            let pagination = {\n                current: this.currentPage,\n                size: this.pagination.size,\n                offset: this.offset\n            };\n            this.$emit(\"pageIndexChange\", pagination);\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n","<template>\n    <div class='vue-table-component' :class=\"style.component\">\n        <div class=\"vue-table-toolbar\" :class=\"style.toolbar\"></div>\n        <div class=\"vue-table-container\" :class=\"style.tableContainer\">\n            <table class=\"vue-table\" :class=\"[style.table,{'striped':options.striped}]\">\n                <thead :class=\"style.thead\">\n                <!--<tr v-if=\"false\">-->\n                <!--<th :colspan=\"columnsTitle.length\">-->\n                <!--<div class=\"ui grid\">-->\n                <!--<div class=\"ten wide column\">-->\n                <!--<h1>Vue-Table</h1>-->\n                <!--</div>-->\n                <!--<div class=\"right aligned six wide column\">-->\n                <!--<div class=\"ui search\">-->\n                <!--<div class=\"ui icon input\">-->\n                <!--<input class=\"prompt\" type=\"text\" placeholder=\"Search countries...\">-->\n                <!--<i class=\"search icon\"></i>-->\n                <!--</div>-->\n                <!--<div class=\"results\"></div>-->\n                <!--</div>-->\n                <!--</div>-->\n                <!--</div>-->\n                <!--</th>-->\n                <!--</tr>-->\n                <tr>\n                    <th v-for=\"column in columnsTitle\">{{column}}</th>\n                </tr>\n                </thead>\n                <tbody :class=\"style.tbody\">\n                <tr v-for=\"row in rowData\">\n                    <td v-for=\"column in columnsName\">\n                        <span v-if=\"!column.isAction\" v-html=\"column.hasFormat ? column.format(row) : row[column.name]\"></span>\n                        <slot v-if=\"column.isAction\" name=\"action\" :row=\"row\"></slot>\n                    </td>\n                </tr>\n                </tbody>\n                <tfoot>\n                <tr>\n                    <th :colspan=\"columnsTitle.length\">\n                        <div class=\"ui grid\">\n                            <div class=\"six wide column\">\n\n                            </div>\n                            <div class=\"right aligned ten wide column\">\n                                <vue-table-pagination :styles=\"style\" @pageIndexChange=\"onPageIndexChange\"\n                                                      :pagination=\"pagination\"></vue-table-pagination>\n                            </div>\n                        </div>\n                    </th>\n                </tr>\n                </tfoot>\n            </table>\n        </div>\n    </div>\n</template>\n\n<script>\n    import style from './style.js'\n    import _ from 'lodash'\n    import vueTablePagination from './vue-table-pagination.vue'\n\n\n    export default {\n        name: 'vue-table',\n        components: {\n            vueTablePagination\n        },\n        props: {\n            source: {\n                type: [Object, Function, Array]\n            },\n            columns: {\n                type: Array,\n                required: true\n            },\n            options: {\n                type: [Object],\n                default: function () {\n                    return {\n                        pagination: {\n                            type: 'client',  //e.g. client server none\n                            size: 10\n                        },\n                        styleType: 'semantic', //e.g. semantic bootstrap\n                        style: {},\n                        undefinedText: '-',\n                        striped: false\n                    }\n                }\n            }\n        },\n        data() {\n            return {\n                style: _.merge(this.options.styleType ? style[this.options.styleType] : {}, this.options.style),\n                columnsTitle: this.columns.map((item) => (typeof item === 'string' ? item : (item.display || item.name))),\n                columnsName: this.columns.map((item) => {\n                    return {\n                        name: typeof item === 'string' ? item : item.name,\n                        hasFormat: !!item.format,\n                        isAction: !!item.action,\n                        format: item.format\n                    }\n                }),\n                hasAction: !!this.columns.find((item) => {\n                    return item.action\n                }),\n                rowData: {},\n                serverParams: {pagination: this.options.pagination},\n                mode: 'data',  //e.g. data, api, promise\n                pagination: {\n                    startPage: 0,\n                    size: this.options.pagination.size,\n                    total: 50\n                }\n            }\n        },\n        computed: {},\n        methods: {\n            refresh,\n            onPageIndexChange,\n            goToPageNum,\n            source2RowData\n        },\n        mounted\n    }\n\n    /*******************************\n     * methods\n     *******************************/\n    function onPageIndexChange(pagination) {\n        this.$emit('onPageIndexChange', pagination)\n        this.goToPageNum(pagination)\n    }\n\n    function goToPageNum(pagination) {\n        this.serverParams.pagination = pagination\n        this.refresh()\n    }\n\n    function refresh() {\n        this.$emit('onRefreshBegin')\n        return this.source2RowData().then((data) => {\n            this.rowData = data\n            this.$emit('onRefreshFinished', data)\n        })\n    }\n\n    /**\n     * Get rowData for source\n     * @param source\n     * @return {*}\n     */\n    function source2RowData() {\n        let source = this.source\n        let params = this.serverParams\n        if (source.apiUrl) {\n            // api mode\n            this.mode = 'api'\n            return sourceApiData(source, params)\n        } else if (typeof source === 'function') {\n            // promise mode\n            this.mode = 'promise'\n            return source(params)\n        } else if (typeof source === 'object') {\n            // data mode\n            this.mode = 'data'\n            return Promise.resolve(source)\n        }\n    }\n\n    /***********************\n     * mounted\n     ***********************/\n\n    function mounted() {\n\n    }\n\n    /***********************\n     * computed\n     ***********************/\n\n\n    /**\n     * For api mode, we ues XMLHttpRequest to get data\n     * @param source\n     * @param params\n     * @return {Promise}\n     */\n    function sourceApiData(source, serverParams) {\n        return new Promise(function (resolve, reject) {\n\n            let httpRequest = null\n            let params = {\n                offset: serverParams.pagination.offset,\n                size: serverParams.pagination.size,\n                search: serverParams.search\n            }\n            let paramsStr = []\n            let method = source.method.toUpperCase() || 'GET'\n\n            for (let key in params) {\n                if (params[key] !== null && typeof(params[key]) !== 'undefined') {\n                    paramsStr.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]))\n                }\n\n            }\n\n            if (window.XMLHttpRequest) { // Mozilla, Safari, IE7+ ...\n                httpRequest = new XMLHttpRequest()\n            } else if (window.ActiveXObject) { // IE 6 and older\n                httpRequest = new ActiveXObject('Microsoft.XMLHTTP')\n            }\n\n            httpRequest.open(method, source.apiUrl + (method === 'GET' ? (source.apiUrl.indexOf('?') > -1 ? '&' : '?') + paramsStr.join('&') : ''))\n\n            httpRequest.setRequestHeader('Content-type', 'application/json')\n            for (let header in source.headers) {\n                httpRequest.setRequestHeader(header, source.headers[header])\n            }\n            httpRequest.onreadystatechange = function () {\n                if (httpRequest.readyState === XMLHttpRequest.DONE) {\n                    if (httpRequest.status === 200) {\n                        resolve(JSON.parse(httpRequest.responseText))\n                    } else {\n                        reject({msg: 'Error when get data form server!'})\n                    }\n                }\n            }\n\n            httpRequest.send(paramsStr.join('&'))\n        })\n    }\n\n</script>\n\n<style scoped>\n</style>\n","<template>\n    <div class='vue-table-info-component'>\n\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'vue-table-info',\n        data() {\n            return {}\n        },\n        methods: {},\n        mounted() {}\n    }\n</script>\n\n<style scoped>\n\n</style>\n"],"names":["semantic","bootstrap","render","Object","Math","ceil","pagination","total","size","_","range","pageCount","currentPage","onPagesClick","startPage","index","offset","$emit","Function","Array","merge","options","styleType","style","columns","map","item","display","name","format","action","find","onPageIndexChange","goToPageNum","serverParams","refresh","source2RowData","then","data","rowData","source","params","apiUrl","mode","sourceApiData","Promise","resolve","mounted","reject","httpRequest","search","paramsStr","method","toUpperCase","key","push","encodeURIComponent","window","XMLHttpRequest","ActiveXObject","open","indexOf","join","setRequestHeader","header","headers","onreadystatechange","readyState","DONE","status","JSON","parse","responseText","msg","send"],"mappings":";;;;;;;;AAAA,IAAMA,WAAW;oBACG,EADH;WAEN,sBAFM;gBAGD,oBAHC;oBAIG,MAJH;mBAKE,WALF;oBAMG,WANH;uBAOM,mBAPN;wBAQO;CARxB;AAUA,IAAMC,YAAY,EAAlB;;AAEA,YAAe;sBAAA;;CAAf;;ACZA;;;;;;;;;;CAAA;;AAgBA,AAEA,yBAAe,EAACC;;;;;;;;;;KAAD,qBAAA,6BAAA;UACL,sBADK;WAEJ;gBACK;kBACEC;SAFP;oBAIS;;;;kBAIFA,MAJE;qBAKC,oBAAY;uBACV;+BACQ,CADR;2BAEI,EAFJ;0BAGG;iBAHV;;SAVL;iBAiBM;kBACCA,MADD;qBAEI,oBAAY;uBACV,EAAP;;;;KAtBD;QAAA,kBA2BJ;eACI;;yBAEU;SAFjB;KA5BO;;aAiCF;;KAjCE;cAoCD;mBACK,qBAAY;mBACZC,KAAKC,IAAL,CAAU,KAAKC,UAAL,CAAgBC,KAAhB,GAAwB,KAAKD,UAAL,CAAgBE,IAAlD,CAAP;SAFE;eAIC,iBAAY;mBACRC,EAAEC,KAAF,CAAQ,CAAR,EAAW,KAAKC,SAAL,GAAiB,CAA5B,CAAP;SALE;gBAOE,kBAAY;mBACT,CAAC,KAAKC,WAAL,GAAmB,CAApB,IAAyB,KAAKN,UAAL,CAAgBE,IAAhD;;KA5CG;WAAA,qBA+CD;aACDK,YAAL,CAAkB,KAAKP,UAAL,CAAgBQ,SAAhB,GAA4B,CAA9C;;CAhDR;;;;;;;;;;AA4DA,SAASD,YAAT,CAAsBE,KAAtB,EAA6B;QACrBA,UAAU,KAAKH,WAAf,IAA8BG,QAAQ,CAAtC,IAA2CA,SAAS,KAAKJ,SAA7D,EAAwE;aAC/DC,WAAL,GAAmBG,KAAnB;YACIT,aAAa;qBACJ,KAAKM,WADD;kBAEP,KAAKN,UAAL,CAAgBE,IAFT;oBAGL,KAAKQ;SAHjB;aAKKC,KAAL,CAAW,iBAAX,EAA8BX,UAA9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtFR;;;;;;;;;;CAAA;;AAyDA,AAKA,eAAe,EAACJ;;;;;;;;KAAD,qBAAA,6BAAA;UACL,WADK;gBAEC;;KAFD;WAKJ;gBACK;kBACE,CAACC,MAAD,EAASe,QAAT,EAAmBC,KAAnB;SAFP;iBAIM;kBACCA,KADD;sBAEK;SANX;iBAQM;kBACC,CAAChB,MAAD,CADD;qBAEI,oBAAY;uBACV;gCACS;8BACF,QADE;8BAEF;qBAHP;+BAKQ,UALR;2BAMI,EANJ;mCAOY,GAPZ;6BAQM;iBARb;;;KAhBD;QAAA,kBA6BJ;eACI;mBACIM,EAAEW,KAAF,CAAQ,KAAKC,OAAL,CAAaC,SAAb,GAAyBC,MAAM,KAAKF,OAAL,CAAaC,SAAnB,CAAzB,GAAyD,EAAjE,EAAqE,KAAKD,OAAL,CAAaE,KAAlF,CADJ;0BAEW,KAAKC,OAAL,CAAaC,GAAb,CAAiB,UAACC,IAAD;uBAAW,OAAOA,IAAP,KAAgB,QAAhB,GAA2BA,IAA3B,GAAmCA,KAAKC,OAAL,IAAgBD,KAAKE,IAAnE;aAAjB,CAFX;yBAGU,KAAKJ,OAAL,CAAaC,GAAb,CAAiB,UAACC,IAAD,EAAU;uBAC7B;0BACG,OAAOA,IAAP,KAAgB,QAAhB,GAA2BA,IAA3B,GAAkCA,KAAKE,IAD1C;+BAEQ,CAAC,CAACF,KAAKG,MAFf;8BAGO,CAAC,CAACH,KAAKI,MAHd;4BAIKJ,KAAKG;iBAJjB;aADS,CAHV;uBAWQ,CAAC,CAAC,KAAKL,OAAL,CAAaO,IAAb,CAAkB,UAACL,IAAD,EAAU;uBAC9BA,KAAKI,MAAZ;aADS,CAXV;qBAcM,EAdN;0BAeW,EAACxB,YAAY,KAAKe,OAAL,CAAaf,UAA1B,EAfX;kBAgBG,MAhBH;wBAiBS;2BACG,CADH;sBAEF,KAAKe,OAAL,CAAaf,UAAb,CAAwBE,IAFtB;uBAGD;;SApBf;KA9BO;;cAsDD,EAtDC;aAuDF;wBAAA;4CAAA;gCAAA;;KAvDE;;;;;;CAAf,CAmEA,SAASwB,iBAAT,CAA2B1B,UAA3B,EAAuC;SAC9BW,KAAL,CAAW,mBAAX,EAAgCX,UAAhC;SACK2B,WAAL,CAAiB3B,UAAjB;;;AAGJ,SAAS2B,WAAT,CAAqB3B,UAArB,EAAiC;SACxB4B,YAAL,CAAkB5B,UAAlB,GAA+BA,UAA/B;SACK6B,OAAL;;;AAGJ,SAASA,OAAT,GAAmB;;;SACVlB,KAAL,CAAW,gBAAX;WACO,KAAKmB,cAAL,GAAsBC,IAAtB,CAA2B,UAACC,IAAD,EAAU;cACnCC,OAAL,GAAeD,IAAf;cACKrB,KAAL,CAAW,mBAAX,EAAgCqB,IAAhC;KAFG,CAAP;;;;;;;;AAWJ,SAASF,cAAT,GAA0B;QAClBI,SAAS,KAAKA,MAAlB;QACIC,SAAS,KAAKP,YAAlB;QACIM,OAAOE,MAAX,EAAmB;;aAEVC,IAAL,GAAY,KAAZ;eACOC,cAAcJ,MAAd,EAAsBC,MAAtB,CAAP;KAHJ,MAIO,IAAI,OAAOD,MAAP,KAAkB,UAAtB,EAAkC;;aAEhCG,IAAL,GAAY,SAAZ;eACOH,OAAOC,MAAP,CAAP;KAHG,MAIA,IAAI,QAAOD,MAAP,yCAAOA,MAAP,OAAkB,QAAtB,EAAgC;;aAE9BG,IAAL,GAAY,MAAZ;eACOE,QAAQC,OAAR,CAAgBN,MAAhB,CAAP;;;;;;;;AAQR,SAASO,OAAT,GAAmB;;;;;;;;;;;;AAenB,SAASH,aAAT,CAAuBJ,MAAvB,EAA+BN,YAA/B,EAA6C;WAClC,IAAIW,OAAJ,CAAY,UAAUC,OAAV,EAAmBE,MAAnB,EAA2B;;YAEtCC,cAAc,IAAlB;YACIR,SAAS;oBACDP,aAAa5B,UAAb,CAAwBU,MADvB;kBAEHkB,aAAa5B,UAAb,CAAwBE,IAFrB;oBAGD0B,aAAagB;SAHzB;YAKIC,YAAY,EAAhB;YACIC,SAASZ,OAAOY,MAAP,CAAcC,WAAd,MAA+B,KAA5C;;aAEK,IAAIC,GAAT,IAAgBb,MAAhB,EAAwB;gBAChBA,OAAOa,GAAP,MAAgB,IAAhB,IAAwB,OAAOb,OAAOa,GAAP,CAAP,KAAwB,WAApD,EAAiE;0BACnDC,IAAV,CAAeC,mBAAmBF,GAAnB,IAA0B,GAA1B,GAAgCE,mBAAmBf,OAAOa,GAAP,CAAnB,CAA/C;;;;YAKJG,OAAOC,cAAX,EAA2B;;0BACT,IAAIA,cAAJ,EAAd;SADJ,MAEO,IAAID,OAAOE,aAAX,EAA0B;;0BACf,IAAIA,aAAJ,CAAkB,mBAAlB,CAAd;;;oBAGQC,IAAZ,CAAiBR,MAAjB,EAAyBZ,OAAOE,MAAP,IAAiBU,WAAW,KAAX,GAAmB,CAACZ,OAAOE,MAAP,CAAcmB,OAAd,CAAsB,GAAtB,IAA6B,CAAC,CAA9B,GAAkC,GAAlC,GAAwC,GAAzC,IAAgDV,UAAUW,IAAV,CAAe,GAAf,CAAnE,GAAyF,EAA1G,CAAzB;;oBAEYC,gBAAZ,CAA6B,cAA7B,EAA6C,kBAA7C;aACK,IAAIC,MAAT,IAAmBxB,OAAOyB,OAA1B,EAAmC;wBACnBF,gBAAZ,CAA6BC,MAA7B,EAAqCxB,OAAOyB,OAAP,CAAeD,MAAf,CAArC;;oBAEQE,kBAAZ,GAAiC,YAAY;gBACrCjB,YAAYkB,UAAZ,KAA2BT,eAAeU,IAA9C,EAAoD;oBAC5CnB,YAAYoB,MAAZ,KAAuB,GAA3B,EAAgC;4BACpBC,KAAKC,KAAL,CAAWtB,YAAYuB,YAAvB,CAAR;iBADJ,MAEO;2BACI,EAACC,KAAK,kCAAN,EAAP;;;SALZ;;oBAUYC,IAAZ,CAAiBvB,UAAUW,IAAV,CAAe,GAAf,CAAjB;KAxCG,CAAP;;;AC9LJ;;;;;;;;;;CAAA;;AAOA,mBAAe,EAAC5D;;KAAD,qBAAA,6BAAA;UACL,gBADK;QAAA,kBAEJ;eACI,EAAP;KAHO;;aAKF,EALE;WAAA,qBAMD;CANd;;;;;;;;;;;;;;"}