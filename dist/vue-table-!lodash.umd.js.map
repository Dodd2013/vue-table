{"version":3,"file":"vue-table-!lodash.umd.js","sources":["../src/style.js","../src/vue-table-pagination.vue","../src/vue-table.vue","../src/vue-table-info.vue"],"sourcesContent":["const semantic = {\n    tableContainer: \"\",\n    table: \"ui celled teal table\",\n    pagination: \"ui pagination menu\",\n    paginationItem: \"item\",\n    paginationPre: \"icon item\",\n    paginationNext: \"icon item\",\n    paginationPreIcon: \"left chevron icon\",\n    paginationNextIcon: \"right chevron icon\"\n};\nconst bootstrap = {};\n\nexport default {\n    semantic,\n    bootstrap\n};","<template>\n    <div class='vue-table-pagination-component' :class=\"styles.pagination\">\n        <a class=\"\" @click=\"onPagesClick(pagination.current - 1)\"\n           :class=\"[styles.paginationPre,{'disabled':pagination.current === 0}]\">\n            <i class=\"\" :class=\"styles.paginationPreIcon\"></i>\n        </a>\n        <a class=\"\" v-for=\"index in pages\" @click=\"onPagesClick(index - 1)\"\n           :class=\"[styles.paginationItem,{'active':pagination.current === index - 1}]\">{{ index }}</a>\n        <a class=\"\" @click=\"onPagesClick(pagination.current + 1)\"\n           :class=\"[styles.paginationNext,{'disabled':pagination.current === pageCount-1}]\">\n            <i class=\"\" :class=\"styles.paginationNextIcon\"></i>\n        </a>\n    </div>\n</template>\n\n<script>\n    import _ from \"lodash\";\n\n    export default {\n        name: \"vue-table-pagination\",\n        props: {\n            styles: {\n                type: Object\n            },\n            pagination: {\n                /**\n                 * e.g. {current:0,total:30,size:10}\n                 */\n                type: Object,\n                default: function () {\n                    return {\n                        current: 0,\n                        total: 10,\n                        size: 10\n                    };\n                }\n            },\n            options: {\n                type: Object,\n                default: function () {\n                    return {};\n                }\n            }\n\n        },\n        data() {\n            return {};\n        },\n        methods: {\n            onPagesClick: function (index) {\n                if (index !== this.pagination.current && index >= 0 && index < this.pageCount) {\n                    console.log(index);\n                    this.$emit(\"pageIndexChange\", index);\n                }\n            }\n        },\n        computed: {\n            pageCount: function () {\n                return Math.ceil(this.pagination.total / this.pagination.size);\n            },\n            pages: function () {\n                return _.range(1, this.pageCount + 1);\n            }\n        },\n        mounted() {\n        }\n    };\n</script>\n\n<style scoped>\n\n</style>\n","<template>\n    <div class='vue-table-component' :class=\"style.component\">\n        <div class=\"vue-table-toolbar\" :class=\"style.toolbar\"></div>\n        <div class=\"vue-table-container\" :class=\"style.tableContainer\">\n            <table class=\"vue-table\" :class=\"[style.table,{'striped':options.striped}]\">\n                <thead :class=\"style.thead\">\n                <tr>\n                    <th :colspan=\"columnsTitle.length\">\n                        <div class=\"ui grid\">\n                            <div class=\"ten wide column\">\n                                <h1>Vue-Table</h1>\n                            </div>\n                            <div class=\"right aligned six wide column\">\n                                <div class=\"ui search\">\n                                    <div class=\"ui icon input\">\n                                        <input class=\"prompt\" type=\"text\" placeholder=\"Search countries...\">\n                                        <i class=\"search icon\"></i>\n                                    </div>\n                                    <div class=\"results\"></div>\n                                </div>\n                            </div>\n                        </div>\n\n                    </th>\n                </tr>\n                <tr>\n                    <th v-for=\"column in columnsTitle\">{{column}}</th>\n                </tr>\n                </thead>\n                <tbody :class=\"style.tbody\">\n                <tr v-for=\"row in rowData\">\n                    <td v-for=\"column in columnsName\"\n                        v-html=\"column.hasFormat ? column.format(row) : row[column.name]\"></td>\n                </tr>\n                </tbody>\n                <tfoot>\n                <tr>\n                    <th :colspan=\"columnsTitle.length\">\n                        <div class=\"ui grid\">\n                            <div class=\"six wide column\">\n\n                            </div>\n                            <div class=\"right aligned ten wide column\">\n                                <vue-table-pagination :styles=\"style\" @pageIndexChange=\"onPageIndexChange\"\n                                                      :pagination=\"{current:3,total:50,size:10}\"></vue-table-pagination>\n                            </div>\n                        </div>\n                    </th>\n                </tr>\n                </tfoot>\n            </table>\n        </div>\n    </div>\n</template>\n\n<script>\n    import style from \"./style.js\";\n    import _ from \"lodash\";\n    import vueTablePagination from \"./vue-table-pagination.vue\";\n\n\n    export default {\n        name: \"vue-table\",\n        components: {\n            vueTablePagination\n        },\n        props: {\n            source: {\n                type: [Object, Function, Array]\n            },\n            columns: {\n                type: Array,\n                required: true\n            },\n            options: {\n                type: [Object],\n                default: function () {\n                    return {\n                        pagination: {\n                            type: \"client\",  //e.g. client server none\n                            size: 10\n                        },\n                        styleType: \"semantic\", //e.g. semantic bootstrap\n                        style: {},\n                        undefinedText: \"-\",\n                        striped: false\n                    };\n                }\n            }\n        },\n        data() {\n            return {\n                style: _.merge(this.options.styleType ? style[this.options.styleType] : {}, this.options.style),\n                columnsTitle: this.columns.map((item) => (typeof item === \"string\" ? item : (item.display || item.name))),\n                columnsName: this.columnsName = this.columns.map((item) => {\n                    return {\n                        name: typeof item === \"string\" ? item : item.name,\n                        hasFormat: !!item.format,\n                        format: item.format\n                    };\n                }),\n                rowData: {},\n                serverParams: {pagination: this.options.pagination},\n                mode: \"data\",  //e.g. data, api, promise\n                pagination: {\n                    start: 0,\n                    size: this.options.pagination.size\n                }\n            };\n        },\n        computed: {},\n        methods: {\n            refresh,\n            onPageIndexChange,\n            goToPageNum\n        },\n        mounted\n    };\n\n    /*******************************\n     * methods\n     *******************************/\n    function onPageIndexChange(index) {\n        console.log(index);\n        this.$emit(\"onPageIndexChange\", index);\n        goToPageNum(index);\n    }\n\n    function goToPageNum(index) {\n\n    }\n\n    function refresh() {\n        this.$emit(\"onRefreshBegin\");\n        source2RowData(this.source, this.serverParams).then((data) => {\n            this.rowData = data;\n            this.$emit(\"onRefreshFinished\");\n        });\n    }\n\n    /***********************\n     * mounted\n     ***********************/\n\n    function mounted() {\n\n        this.refresh();\n\n    }\n\n    /***********************\n     * computed\n     ***********************/\n\n    /**\n     * Get rowData for source\n     * @param source\n     * @return {*}\n     */\n    function source2RowData(source, params) {\n\n        if (source.apiUrl) {\n            // api mode\n            return sourceApiData(source, params);\n        } else if (typeof source === \"function\") {\n            // promise mode\n            return source(params);\n        } else if (typeof source === \"object\") {\n            // data mode\n            return Promise.resolve(source);\n        }\n    }\n\n    /**\n     * For api mode, we ues XMLHttpRequest to get data\n     * @param source\n     * @param params\n     * @return {Promise}\n     */\n    function sourceApiData(source, params) {\n        return new Promise(function (resolve, reject) {\n\n            let httpRequest = null;\n            let paramsStr = [];\n            let method = source.method.toUpperCase() || \"GET\";\n            for (let key in params) {\n                paramsStr.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]));\n            }\n\n            if (window.XMLHttpRequest) { // Mozilla, Safari, IE7+ ...\n                httpRequest = new XMLHttpRequest();\n            } else if (window.ActiveXObject) { // IE 6 and older\n                httpRequest = new ActiveXObject(\"Microsoft.XMLHTTP\");\n            }\n\n            httpRequest.open(method, source.apiUrl + (method === \"GET\" ? (source.apiUrl.indexOf(\"?\") > -1 ? \"&\" : \"?\") + paramsStr.join(\"&\") : \"\"));\n\n            httpRequest.setRequestHeader(\"Content-type\", \"application/json\");\n            for (let header in source.headers) {\n                httpRequest.setRequestHeader(header, source.headers[header]);\n            }\n            httpRequest.onreadystatechange = function () {\n                if (httpRequest.readyState === XMLHttpRequest.DONE) {\n                    if (httpRequest.status === 200) {\n                        console.log(httpRequest.responseText);\n                        resolve(JSON.parse(httpRequest.responseText));\n                    } else {\n                        reject({msg: \"Error when get data form server!\"});\n                    }\n                }\n            };\n\n            httpRequest.send(paramsStr.join(\"&\"));\n        });\n    }\n\n</script>\n\n<style scoped>\n</style>\n","<template>\n    <div class='vue-table-info-component'>\n\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'vue-table-info',\n        data() {\n            return {}\n        },\n        methods: {},\n        mounted() {}\n    }\n</script>\n\n<style scoped>\n\n</style>\n"],"names":["semantic","bootstrap","render","Object","index","pagination","current","pageCount","log","$emit","Math","ceil","total","size","_","range","Function","Array","merge","options","styleType","style","columns","map","item","display","name","columnsName","format","onPageIndexChange","goToPageNum","refresh","source","serverParams","then","data","rowData","mounted","source2RowData","params","apiUrl","sourceApiData","Promise","resolve","reject","httpRequest","paramsStr","method","toUpperCase","key","push","encodeURIComponent","window","XMLHttpRequest","ActiveXObject","open","indexOf","join","setRequestHeader","header","headers","onreadystatechange","readyState","DONE","status","responseText","JSON","parse","msg","send"],"mappings":"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"}