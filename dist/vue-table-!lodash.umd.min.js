!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],e):e(t.vueTable={},t._)}(this,function(t,e){"use strict";function n(t,e){return new Promise(function(n,i){var a=null,o={search:e.search};e.pagination&&(o.offset=e.pagination.offset,o.size=e.pagination.size);var s=[],r=t.method.toUpperCase()||"GET";for(var c in o)null!==o[c]&&void 0!==o[c]&&s.push(encodeURIComponent(c)+"="+encodeURIComponent(o[c]));window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),a.open(r,t.apiUrl+("GET"===r?(t.apiUrl.indexOf("?")>-1?"&":"?")+s.join("&"):"")),a.setRequestHeader("Content-type","application/json");for(var l in t.headers)a.setRequestHeader(l,t.headers[l]);a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(200===a.status?n(JSON.parse(a.responseText)):i({msg:"Error when get data form server!"}))},a.send(s.join("&"))})}e=e&&e.hasOwnProperty("default")?e.default:e;var i={semantic:{selectedRow:"active",tableContainer:"",table:"ui celled teal table",pagination:"ui pagination menu",paginationItem:"item",paginationPre:"icon item",paginationNext:"icon item",paginationPreIcon:"left chevron icon",paginationNextIcon:"right chevron icon"},bootstrap:{}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),n=" /*# sourceMappingURL=vue-table-pagination.vue.map */";e.type="text/css",e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),t.appendChild(e)}}();var a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-table-pagination-component",class:t.styles.pagination},[n("a",{class:[t.styles.paginationPre,{disabled:1===t.currentPage}],on:{click:function(e){t.onPagesClick(t.currentPage-1)}}},[n("i",{class:t.styles.paginationPreIcon})]),t._v(" "),t._l(t.pages,function(e){return n("a",{class:[t.styles.paginationItem,{active:t.currentPage===e}],on:{click:function(n){t.onPagesClick(e)}}},[t._v(t._s(e))])}),t._v(" "),n("a",{class:[t.styles.paginationNext,{disabled:t.currentPage===t.pageCount}],on:{click:function(e){t.onPagesClick(t.currentPage+1)}}},[n("i",{class:t.styles.paginationNextIcon})])],2)},staticRenderFns:[],_scopeId:"data-v-fb2af88e",name:"vue-table-pagination",props:{styles:{type:Object},pagination:{type:Object,default:function(){return{startPage:0,total:10,size:10}}},options:{type:Object,default:function(){return{}}}},data:function(){return{currentPage:1}},methods:{onPagesClick:function(t){if(t!==this.currentPage&&t>0&&t<=this.pageCount){this.currentPage=t;var e={current:this.currentPage,size:this.pagination.size,offset:this.offset};this.$emit("pageIndexChange",e)}}},computed:{pageCount:function(){return Math.ceil(this.pagination.total/this.pagination.size)},pages:function(){return e.range(1,this.pageCount+1)},offset:function(){return(this.currentPage-1)*this.pagination.size}},mounted:function(){}},o={pagination:{type:"client",offset:0,size:10},styleType:"semantic",style:{},undefinedText:"-",striped:!1,canSelect:!1,selectMode:"single"},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){this.value=t}function e(e){function n(a,o){try{var s=e[a](o),r=s.value;r instanceof t?Promise.resolve(r.value).then(function(t){n("next",t)},function(t){n("throw",t)}):i(s.done?"return":"normal",s.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":a.resolve({value:e,done:!0});break;case"throw":a.reject(e);break;default:a.resolve({value:e,done:!1})}(a=a.next)?n(a.key,a.arg):o=null}var a,o;this._invoke=function(t,e){return new Promise(function(i,s){var r={key:t,arg:e,resolve:i,reject:s,next:null};o?o=o.next=r:(a=o=r,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}();!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),n=" /*# sourceMappingURL=vue-table.vue.map */";e.type="text/css",e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),t.appendChild(e)}}();var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-table-component",class:t.style.component},[n("div",{staticClass:"vue-table-toolbar",class:t.style.toolbar}),t._v(" "),n("div",{staticClass:"vue-table-container",class:t.style.tableContainer},[n("table",{staticClass:"vue-table",class:[t.style.table,{striped:t.opt.striped}]},[n("thead",{class:t.style.thead},[n("tr",t._l(t.columnsTitle,function(e){return n("th",[t._v(t._s(e))])}))]),t._v(" "),n("tbody",{class:t.style.tbody},t._l(t.displayRowData,function(e){return n("tr",{class:e._vueTable_Selected?t.style.selectedRow:"",on:{click:function(n){t.onRowSelect(e)}}},t._l(t.columnsName,function(i){return n("td",[i.isAction?t._e():n("span",{domProps:{innerHTML:t._s(i.hasFormat?i.format(e):e[i.name])}}),t._v(" "),i.isAction?t._t("action",null,{row:e}):t._e()],2)}))})),t._v(" "),n("tfoot",[n("tr",[n("th",{attrs:{colspan:t.columnsTitle.length}},[n("div",{staticClass:"ui grid"},[n("div",{staticClass:"six wide column"}),t._v(" "),"none"!==t.opt.pagination.type?n("div",{staticClass:"right aligned ten wide column"},[n("vue-table-pagination",{attrs:{styles:t.style,pagination:t.pagination},on:{pageIndexChange:t.onPageIndexChange}})],1):t._e()])])])])])])])},staticRenderFns:[],_scopeId:"data-v-19f1d484",name:"vue-table",components:{vueTablePagination:a},props:{source:{type:[Object,Function,Array]},columns:{type:Array,required:!0},options:{type:[Object],default:function(){return{}}}},data:function(){return{opt:null,style:null,columnsTitle:null,columnsName:null,rowData:null,serverParams:null,mode:null,pagination:null,clientParams:null,selectedRow:null}},computed:{hasAction:function(){return!!this.columns.find(function(t){return t.action})},isClientPagination:function(){return"client"===this.opt.pagination.type},isServerPagination:function(){return"server"===this.opt.pagination.type},displayRowData:function(){return this.isClientPagination?this.getClientPaginationData():this.isServerPagination?this.rowData:void 0}},methods:{refresh:function(){var t=this;return this.$emit("onRefreshBegin"),this.source2RowData().then(function(e){t.onRefreshFinished(e),t.$emit("onRefreshFinished",e)})},onPageIndexChange:function(t){this.$emit("onPageIndexChange",t),this.goToPageNum(t)},goToPageNum:function(t){this.isServerPagination&&(this.serverParams.pagination=t,this.refresh()),this.isClientPagination&&(this.clientParams.pagination=t)},source2RowData:function(){var t=this.source,e=this.serverParams;return t.apiUrl?(this.mode="api",n(t,e)):"function"==typeof t?(this.mode="promise",t(e)):"object"===(void 0===t?"undefined":s(t))?(this.mode="data",Promise.resolve(t)):void 0},initData:function(){this.opt=e.merge({},o,this.options),this.style=e.merge(this.opt.styleType?i[this.opt.styleType]:{},this.opt.style),this.columnsTitle=this.columns.map(function(t){return"string"==typeof t?t:t.display||t.name}),this.columnsName=this.columns.map(function(t){return{name:"string"==typeof t?t:t.name,hasFormat:!!t.format,isAction:!!t.action,format:t.format}}),this.pagination={startPage:0,size:this.opt.pagination.size,total:1},this.mode="data",this.serverParams=this.initServerParams(),this.clientParams=this.initClientParams()},initServerParams:function(){var t={};return this.isServerPagination&&(t.pagination=this.opt.pagination),t},initClientParams:function(){var t={};return this.isClientPagination&&(t.pagination=this.opt.pagination),t},onRefreshFinished:function(t){"client"===this.opt.pagination.type&&(this.pagination.total=t.length,this.rowData=t),"server"===this.opt.pagination.type&&(this.pagination.total=t.total,this.rowData=t.data)},getClientPaginationData:function(){return e.slice(this.rowData,this.clientParams.pagination.offset,this.clientParams.pagination.offset+this.pagination.size)},onRowSelect:function(t){this.opt.canSelect&&("single"===this.opt.selectMode&&(this.selectedRow&&this.$set(this.selectedRow,"_vueTable_Selected",!1),this.selectedRow=t,this.$set(t,"_vueTable_Selected",!0)),"multi"===this.opt.selectMode&&(this.$set(t,"_vueTable_Selected",!0),this.selectedRow?this.selectedRow.push(t):this.selectedRow=[].push(t)),this.$emit("on-row-select",this.selectedRow))}},mounted:function(){this.refresh()},beforeMount:function(){this.initData()}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),n=" /*# sourceMappingURL=vue-table-info.vue.map */";e.type="text/css",e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),t.appendChild(e)}}();t.vueTable=r,t.vueTableInfo={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vue-table-info-component"})},staticRenderFns:[],_scopeId:"data-v-a3818fe6",name:"vue-table-info",data:function(){return{}},methods:{},mounted:function(){}},t.vueTablePagination=a,Object.defineProperty(t,"__esModule",{value:!0})});